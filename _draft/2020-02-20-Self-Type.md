---
layout: post
comments: true
title:  "Swift 5.2: Self Type"
date:   2020-02-20 11:30:00 +0900
categories: Swift Language Grammar Self Type
---

> Apple 에서 공개한 [The Swift Programming Language (Swift 5.2)](https://docs.swift.org/swift-book/) 책의 [Self Type](https://docs.swift.org/swift-book/ReferenceManual/Types.html#ID610) 부분을 정리한 글입니다. [^types] Swift 5.2 버전에 새로 추가된 내용에 대해 정리합니다.

## Types

### Self Type

`Self` 타입은 특정한 타입이 아니라, 현재 타입을 의미하며 타입 이름을 반복하거나 또는 몰라도 편하게 쓸 수 있도록 만든 것입니다.

`protocol` 선언이나 `protocol` 멤버 선언에 있는 `Self` 타입은 그 `protocol` 을 따르는 최종 타입을 나타냅니다.

`structure`, `class`, 그리고 `enum` 선언에 있는 `Self` 타입은 그 선언이 만들어내는 타입을 나타냅니다. 어떤 타입의 멤버 선언 내에 있는 Self 타입은 해당 타입을 나타냅니다. class 선언의 멤버 내에 있는 Self는 아래와 같은 경우에 쓸 수 있습니다:

* 멤버 함수의 반환 값
* 읽기 전용 subscript 의 반환 값
* 읽기 전용 computed 멤버 변수의 타입
* 멤버 함수의 내부

예를 들면, 아래의 코드는 반환 타입이 Self 인 멤버 함수 f 를 보여줍니다.

```swift
class Superclass {
  func f() -> Self { return self }
}
let x = Superclass()
print(type(of: x.f()))
// Prints "Superclass"

class Subclass: Superclass { }
let y = Subclass()
print(type(of: y.f()))
// Prints "Subclass"

let z: Superclass = Subclass()
print(type(of: z.f()))
// Prints "Subclass"
```

위 예제의 마지막 부분은 Self 가 z 값의 실행 시간 타입인 Subclass 임을 보여줍니다. 변수 자체의 컴파일 시간 타입인 Superclass 가 아닙니다.

중첩 타입 선언 내에 있는 Self 는 가장 안쪽의 타입 선언이 만들어내는 타입을 나타냅니다.

Self 타입은 은 Swift 표준 라이브러리에 있는 type(of:) 함수와 같은 타입을 나타냅니다. 현재 타입의 멤버에 접근하기 위해 `Self.someStaticMember` 라고 쓰는 것은 `type(of: self).someStaticMember` 라고 쓰는 것과 동일합니다.

### 참고 자료

[^types]: [Self Type](https://docs.swift.org/swift-book/ReferenceManual/Types.html#ID610)
